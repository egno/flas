<div>
	<h3 (click)="onGo(mode)">{{mode}}</h3>
	<div>
			<button type="button" class="btn btn-default btn-xs" *ngIf="!editMode" [class.disabled]="!item" (click)="onEdit(item)">Edit</button>
			<button type="button" class="btn btn-default btn-xs" *ngIf="editMode" [class.disabled]="!item" (click)="onSave(item)">Save</button>
			<button type="button" class="btn btn-default btn-xs" *ngIf="editMode !== 'new'"[class.disabled]="!item" (click)="onDelete(item)">Del</button>
	</div>
	<div>
		<table *ngIf="item" class="table table-striped table-condensed table-hover">
			<tbody>
				<tr *ngFor="let h of headers" >
					<td>
						{{h.name}}
					</td>
					<td >
						<div *ngIf="!editMode || h.name === 'uuid'">
							<div *ngIf="!h.references"> {{item[h.name]}} </div>
							<div *ngIf="h.references && item[h.name] && item[h.name] !== null"> {{item[h.name].d}} </div>
						</div>
						<div *ngIf="editMode && h.name !== 'uuid'">
							<input *ngIf="!h.references" [type]="getType(h)" [(ngModel)]="item[h.name]"/>

							<select *ngIf="h.references && foreigners[h.name] && foreigners[h.name].list" [ngModel]="item[h.name] | json" (ngModelChange)="item[h.name]=parseEvent($event)">
								<option [value]="null"> - </option>
								<option *ngFor="let l of foreigners[h.name].list" [value]="l | json">{{l.d}}</option>
							</select>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>
